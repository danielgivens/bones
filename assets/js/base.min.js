function commaSeparateNumber(a){for(;/(\d+)(\d{3})/.test(a.toString());)a=a.toString().replace(/(\d+)(\d{3})/,"$1,$2");return a}var timeout,$eat,$clickTimeout,$countTimeout,$aboutCycle,mouse=new Array,bark4=new Howl({src:["assets/sounds/bark-1.m4a"],autoplay:!1,volume:.1,loop:!1}),bark2=new Howl({src:["assets/sounds/bark-2.m4a"],autoplay:!1,volume:.1,loop:!1}),growl=new Howl({src:["assets/sounds/bark-3.m4a"],autoplay:!1,volume:1,loop:!1}),bark3=new Howl({src:["assets/sounds/bark-5.m4a"],autoplay:!1,volume:.1,loop:!1,rate:.88}),bark5=new Howl({src:["assets/sounds/bark-4.m4a"],autoplay:!1,volume:.1,loop:!1,rate:.9}),squeak=new Howl({src:["assets/sounds/squeak.m4a"],autoplay:!1,volume:.2,loop:!1,rate:1}),sniff=new Howl({src:["assets/sounds/sniff.m4a"],autoplay:!0,volume:0,loop:!0}),pant=new Howl({src:["assets/sounds/pant.m4a"],autoplay:!0,volume:0,loop:!0}),chomp=new Howl({src:["assets/sounds/chomp.m4a"],autoplay:!0,volume:0,loop:!0}),dog=function(){function a(){document.addEventListener("mousemove",c),setInterval(d,1e3/j),$(".treat").hover(function(){$("body").addClass("show-treat")},function(){$("body").removeClass("show-treat")}),$(".about").hover(function(){bark2.volume(.2),bark2.stop(),bark2.play()},function(){bark2.volume(0),bark2.stop()}),$(".about").click(function(){$("body").addClass("show-about"),b()}),$(".back").click(function(){$("body").removeClass("show-about"),clearTimeout($aboutCycle)}),$(".box a").hover(function(){squeak.volume(.2),squeak.stop(),squeak.play()},function(){squeak.volume(0),squeak.stop()}),$(".box div").hover(function(){$text=$(this).find("span").html(),$("#cta").html($text)},function(){$text=$("#cta").attr("data-default"),$("#cta").html($text)}),$(".treat").on("mousemove",function(){$(".clicked").length<=0&&($("body").addClass("show-treat"),$(".clicked").removeClass("clicked"))}),$(".treat").click(function(){$("#dog").hasClass("change")&&($("body").removeClass("show-treat"),$("body").removeClass("give-treat"),$(this).addClass("clicked"),clearTimeout($eat),clearTimeout($clickTimeout),sniff.fade(.5,0,200),pant.fade(0,.05,200),$this=$(this),$.ajax({url:"treat.php",success:function(a){$("#count").fitText(1),$("#count h2").html(commaSeparateNumber(a)),$("body").addClass("show-count")}}),$eat=setTimeout(function(){sniff.volume(0),pant.volume(0),chomp.volume(1),setTimeout(function(){chomp.volume(0)},500),$("#dog").removeClass("change"),$clickTimeout=setTimeout(function(){$this.removeClass("clicked")},1500),$countTimeout=setTimeout(function(){$("body").removeClass("show-count")},1500)},550))})}function b(){$aboutCycle=setTimeout(function(){$i==$r&&($i=0),$i++,$("#profile figure.shown").removeClass("shown"),$("#profile figure:nth-of-type("+$i+") video").get(0).currentTime=0,$("#profile figure:nth-of-type("+$i+")").addClass("shown"),b()},2e3)}function c(a){n={x:a.clientX,y:a.clientY}}function d(){for(var a=0;a<g.length;a++){var b={mouse:n,part:g[a]};$("#dog img:nth-of-type("+a+")").css({transform:"translateX(-55%) translateY(-60%) matrix(1, 0, 0, 1, "+g[a].x+", "+g[a].y+")","z-index":100-g[a].z}),setTimeout(e,g[a].z*m,b)}}function e(a){a.part.x=f(a.mouse.x-a.part.x)/k+a.part.x,a.part.y=f(a.mouse.y-a.part.y)/k+a.part.y}function f(a){return a>0&&a>l?l:a<0&&a<-l?-l:a}var g,h=(document.getElementById("dog"),window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth),i=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,j=60,k=2,l=200,m=2,n={x:h/2,y:i/2};return g=[{x:n.x,y:n.y,z:44},{x:n.x,y:n.y,z:43},{x:n.x,y:n.y,z:42},{x:n.x,y:n.y,z:41},{x:n.x,y:n.y,z:40},{x:n.x,y:n.y,z:39},{x:n.x,y:n.y,z:38},{x:n.x,y:n.y,z:37},{x:n.x,y:n.y,z:36},{x:n.x,y:n.y,z:35},{x:n.x,y:n.y,z:34},{x:n.x,y:n.y,z:33},{x:n.x,y:n.y,z:32},{x:n.x,y:n.y,z:31},{x:n.x,y:n.y,z:30},{x:n.x,y:n.y,z:29},{x:n.x,y:n.y,z:28},{x:n.x,y:n.y,z:27},{x:n.x,y:n.y,z:26},{x:n.x,y:n.y,z:25},{x:n.x,y:n.y,z:24},{x:n.x,y:n.y,z:23},{x:n.x,y:n.y,z:22},{x:n.x,y:n.y,z:21},{x:n.x,y:n.y,z:20},{x:n.x,y:n.y,z:19},{x:n.x,y:n.y,z:18},{x:n.x,y:n.y,z:17},{x:n.x,y:n.y,z:16},{x:n.x,y:n.y,z:15},{x:n.x,y:n.y,z:14},{x:n.x,y:n.y,z:13},{x:n.x,y:n.y,z:12},{x:n.x,y:n.y,z:11},{x:n.x,y:n.y,z:10},{x:n.x,y:n.y,z:9},{x:n.x,y:n.y,z:8},{x:n.x,y:n.y,z:7},{x:n.x,y:n.y,z:6},{x:n.x,y:n.y,z:5},{x:n.x,y:n.y,z:4},{x:n.x,y:n.y,z:3},{x:n.x,y:n.y,z:2},{x:n.x,y:n.y,z:1},{x:n.x,y:n.y,z:0}],$r=3,$i=0,$(document).on("mousemove",function(){clearTimeout(timeout),$(".clicked").length<=0&&$("body").hasClass("hide-intro")&&!$("body").hasClass("show-about")&&($("body").hasClass("show-treat")?$("body").hasClass("show-about")||(sniff.volume(.5),pant.volume(0),$("#dog").removeClass("change"),$("body").removeClass("give-treat"),timeout=setTimeout(function(){$("body").addClass("show-treat"),sniff.fade(.5,0,200),pant.fade(0,.05,200),$("#dog").addClass("change"),$("body").addClass("give-treat"),$(".clicked").removeClass("clicked")},200)):(sniff.volume(.5),pant.volume(0),$("body").removeClass("give-treat"),$("#dog").removeClass("change"),timeout=setTimeout(function(){$(".clicked").removeClass("clicked"),sniff.fade(.5,0,200)},200)))}),{init:a}}();dog.init(),$(window).blur(function(){sniff.volume(0),pant.volume(0),$("body").removeClass("show-treat")}),$(window).load(function(){$("body").addClass("loaded"),setTimeout(function(){$("#intro span:nth-of-type(1)").addClass("show"),bark4.play(),setTimeout(function(){$("#intro span:nth-of-type(1)").removeClass("show"),$("#intro span:nth-of-type(2)").addClass("show"),bark2.play(),setTimeout(function(){$("#intro span:nth-of-type(2)").removeClass("show"),$("#intro span:nth-of-type(3)").addClass("show"),bark3.play(),setTimeout(function(){$("#intro span:nth-of-type(3)").removeClass("show"),$("#intro span:nth-of-type(4)").addClass("show"),bark4.play(),setTimeout(function(){$("#intro span:nth-of-type(4)").removeClass("show"),$("#intro span:nth-of-type(5)").addClass("show"),bark5.play(),setTimeout(function(){$("body").addClass("hide-intro")},300)},300)},300)},300)},300)},600)});