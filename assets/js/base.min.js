function commaSeparateNumber(a){for(;/(\d+)(\d{3})/.test(a.toString());)a=a.toString().replace(/(\d+)(\d{3})/,"$1,$2");return a}var timeout,$eat,$clickTimeout,$countTimeout,$aboutCycle,mouse=new Array;$mobile=!1;var bark4=new Howl({src:["assets/sounds/bark-1.m4a"],autoplay:!1,volume:.1,loop:!1}),bark2=new Howl({src:["assets/sounds/bark-2.m4a"],autoplay:!1,volume:.1,loop:!1}),bark3=new Howl({src:["assets/sounds/bark-5.m4a"],autoplay:!1,volume:.1,loop:!1,rate:.88}),bark5=new Howl({src:["assets/sounds/bark-4.m4a"],autoplay:!1,volume:.1,loop:!1,rate:.9}),squeak=new Howl({src:["assets/sounds/squeak.m4a"],autoplay:!1,volume:.2,loop:!1,rate:1}),sniff=new Howl({src:["assets/sounds/sniff.m4a"],autoplay:!0,volume:0,loop:!0}),pant=new Howl({src:["assets/sounds/pant.m4a"],autoplay:!0,volume:0,loop:!0}),chomp=new Howl({src:["assets/sounds/chomp.m4a"],autoplay:!0,volume:0,loop:!0});$landscape=!1;var dog=function(){function a(){$mobile?(p=$landscape?{x:$(window).width()/4,y:$(window).height()/2}:{x:$(window).width()/2,y:$(window).height()/4},$("#profile video").each(function(){$(this).find("source").attr("src","")})):($("#profile video").each(function(){$src=$(this).attr("data-src"),$(this).find("source").attr("src",$src),$(this)[0].load()}),p={x:$(window).width()/2,y:$(window).height()/2})}function b(){document.addEventListener("mousemove",d),setInterval(e,1e3/l),$(".hide-mobile").is(":visible")?$mobile=!1:($mobile=!0,$("body").addClass("show-treat"),$("body").addClass("give-treat")),$(".treat").hover(function(){$("body").addClass("show-treat")},function(){$mobile||$("body").removeClass("show-treat")}),$(".about").hover(function(){$mobile||(bark2.volume(.2),bark2.stop(),bark2.play())},function(){bark2.volume(0),bark2.stop()}),$(".about").click(function(){$("body").addClass("show-about"),c()}),$(".back").click(function(){$("body").removeClass("show-about"),clearTimeout($aboutCycle)}),$(".box a").hover(function(){$mobile||(squeak.volume(.2),squeak.stop(),squeak.play())},function(){squeak.volume(0),squeak.stop()}),$(".box div").hover(function(){$text=$(this).find("span").html(),$("#cta").html($text)},function(){$text=$("#cta").attr("data-default"),$("#cta").html($text)}),$(".treat").on("mousemove",function(){$(".clicked").length<=0&&($("body").addClass("show-treat"),$(".clicked").removeClass("clicked"))}),$(".treat").on("mousedown",function(){$("#dog").hasClass("change")&&($mobile||($("body").removeClass("show-treat"),$("body").removeClass("give-treat")),$(this).addClass("clicked"),clearTimeout($eat),clearTimeout($clickTimeout),sniff.fade(.5,0,200),pant.fade(0,.05,200),$this=$(this),$.ajax({url:"treat.php",success:function(a){$("#count").fitText(1),$("#count h2").html(commaSeparateNumber(a)),$("body").addClass("show-count")}}),$eat=setTimeout(function(){sniff.volume(0),pant.volume(0),chomp.volume(1),setTimeout(function(){chomp.volume(0)},500),$("#dog").removeClass("change"),$clickTimeout=setTimeout(function(){$this.removeClass("clicked")},1500),$countTimeout=setTimeout(function(){$("body").removeClass("show-count")},1500)},550))})}function c(){$aboutCycle=setTimeout(function(){$i==$r&&($i=0),$i++,$("#profile figure.shown").removeClass("shown"),$("#profile figure:nth-of-type("+$i+") video").get(0).currentTime=0,$("#profile figure:nth-of-type("+$i+")").addClass("shown"),c()},2e3)}function d(a){p={x:a.clientX,y:a.clientY}}function e(){for(var a=0;a<i.length;a++){var b={mouse:p,part:i[a]};$("#dog img:nth-of-type("+a+")").css({transform:"translateX(-55%) translateY(-60%) matrix(1, 0, 0, 1, "+i[a].x+", "+i[a].y+")","z-index":100-i[a].z}),setTimeout(g,i[a].z*o,b)}}function f(a){var b=a.changedTouches,c=b[0],d="";switch(a.type){case"touchstart":d="mousedown";break;case"touchmove":d="mousemove";break;case"touchend":d="mouseup";break;default:return}var e=document.createEvent("MouseEvent");e.initMouseEvent(d,!0,!0,window,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,0,null),c.target.dispatchEvent(e)}function g(a){a.part.x=h(a.mouse.x-a.part.x)/m+a.part.x,a.part.y=h(a.mouse.y-a.part.y)/m+a.part.y}function h(a){return a>0&&a>n?n:a<0&&a<-n?-n:a}window.addEventListener("orientationchange",function(){$(window).height()>$(window).width()?$landscape=!1:$landscape=!0,a()},!1),$(window).height()>$(window).width()?$landscape=!1:$landscape=!0,$(window).on("resize load",function(){$(".hide-mobile").is(":visible")?($("body").removeClass("show-treat"),$("body").removeClass("give-treat"),$mobile=!1,a()):($mobile=!0,$("body").addClass("show-treat"),$("body").addClass("give-treat"),a())});var i,j=(document.getElementById("dog"),window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth),k=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,l=60,m=2,n=200,o=2,p={x:j/2,y:k/2};return i=[{x:p.x,y:p.y,z:44},{x:p.x,y:p.y,z:43},{x:p.x,y:p.y,z:42},{x:p.x,y:p.y,z:41},{x:p.x,y:p.y,z:40},{x:p.x,y:p.y,z:39},{x:p.x,y:p.y,z:38},{x:p.x,y:p.y,z:37},{x:p.x,y:p.y,z:36},{x:p.x,y:p.y,z:35},{x:p.x,y:p.y,z:34},{x:p.x,y:p.y,z:33},{x:p.x,y:p.y,z:32},{x:p.x,y:p.y,z:31},{x:p.x,y:p.y,z:30},{x:p.x,y:p.y,z:29},{x:p.x,y:p.y,z:28},{x:p.x,y:p.y,z:27},{x:p.x,y:p.y,z:26},{x:p.x,y:p.y,z:25},{x:p.x,y:p.y,z:24},{x:p.x,y:p.y,z:23},{x:p.x,y:p.y,z:22},{x:p.x,y:p.y,z:21},{x:p.x,y:p.y,z:20},{x:p.x,y:p.y,z:19},{x:p.x,y:p.y,z:18},{x:p.x,y:p.y,z:17},{x:p.x,y:p.y,z:16},{x:p.x,y:p.y,z:15},{x:p.x,y:p.y,z:14},{x:p.x,y:p.y,z:13},{x:p.x,y:p.y,z:12},{x:p.x,y:p.y,z:11},{x:p.x,y:p.y,z:10},{x:p.x,y:p.y,z:9},{x:p.x,y:p.y,z:8},{x:p.x,y:p.y,z:7},{x:p.x,y:p.y,z:6},{x:p.x,y:p.y,z:5},{x:p.x,y:p.y,z:4},{x:p.x,y:p.y,z:3},{x:p.x,y:p.y,z:2},{x:p.x,y:p.y,z:1},{x:p.x,y:p.y,z:0}],$r=3,$i=0,document.addEventListener("touchmove",f,!0),document.addEventListener("touchend",f,!0),document.addEventListener("touchstart",f,!0),$(document).on("mousemove resize",function(){clearTimeout(timeout),$(".clicked").length<=0&&$("body").hasClass("hide-intro")&&!$("body").hasClass("show-about")&&($("body").hasClass("show-treat")?$("body").hasClass("show-about")||($mobile||(sniff.volume(.5),pant.volume(0)),$("#dog").removeClass("change"),$mobile||$("body").removeClass("give-treat"),timeout=setTimeout(function(){$("body").addClass("show-treat"),$mobile||(sniff.fade(.5,0,200),pant.fade(0,.05,200)),$("#dog").addClass("change"),$("body").addClass("give-treat"),$(".clicked").removeClass("clicked")},200)):($mobile||(sniff.volume(.5),pant.volume(0)),$("body").removeClass("give-treat"),$("#dog").removeClass("change"),timeout=setTimeout(function(){$(".clicked").removeClass("clicked"),$mobile||sniff.fade(.5,0,200)},200)))}),{init:b}}();dog.init(),$(window).blur(function(){sniff.volume(0),pant.volume(0),$mobile||$("body").removeClass("show-treat")}),$(window).load(function(){$("body").addClass("loaded"),setTimeout(function(){$("#intro span:nth-of-type(1)").addClass("show"),bark4.play(),setTimeout(function(){$("#intro span:nth-of-type(1)").removeClass("show"),$("#intro span:nth-of-type(2)").addClass("show"),bark2.play(),setTimeout(function(){$("#intro span:nth-of-type(2)").removeClass("show"),$("#intro span:nth-of-type(3)").addClass("show"),bark3.play(),setTimeout(function(){$("#intro span:nth-of-type(3)").removeClass("show"),$("#intro span:nth-of-type(4)").addClass("show"),bark4.play(),setTimeout(function(){$("#intro span:nth-of-type(4)").removeClass("show"),$("#intro span:nth-of-type(5)").addClass("show"),bark5.play(),setTimeout(function(){$("body").addClass("hide-intro")},300)},300)},300)},300)},300)},600)});