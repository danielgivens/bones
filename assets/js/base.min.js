function commaSeparateNumber(a){for(;/(\d+)(\d{3})/.test(a.toString());)a=a.toString().replace(/(\d+)(\d{3})/,"$1,$2");return a}var timeout,$eat,$clickTimeout,$countTimeout,$aboutCycle,mouse=new Array,bark4=new Howl({src:["assets/sounds/bark-1.m4a"],autoplay:!1,volume:.1,loop:!1}),bark2=new Howl({src:["assets/sounds/bark-2.m4a"],autoplay:!1,volume:.1,loop:!1}),growl=new Howl({src:["assets/sounds/bark-3.m4a"],autoplay:!1,volume:1,loop:!1}),bark3=new Howl({src:["assets/sounds/bark-5.m4a"],autoplay:!1,volume:.1,loop:!1,rate:.88}),bark5=new Howl({src:["assets/sounds/bark-4.m4a"],autoplay:!1,volume:.1,loop:!1,rate:.9}),squeak=new Howl({src:["assets/sounds/squeak.m4a"],autoplay:!1,volume:.2,loop:!1,rate:1}),sniff=new Howl({src:["assets/sounds/sniff.m4a"],autoplay:!0,volume:0,loop:!0}),pant=new Howl({src:["assets/sounds/pant.m4a"],autoplay:!0,volume:0,loop:!0}),chomp=new Howl({src:["assets/sounds/chomp.m4a"],autoplay:!0,volume:0,loop:!0}),dog=function(){function a(){document.addEventListener("mousemove",c),setInterval(d,1e3/k),$(".hide-mobile").is(":visible")?$mobile=!1:($mobile=!0,$("body").addClass("show-treat"),$("body").addClass("give-treat")),$(".treat").hover(function(){$("body").addClass("show-treat")},function(){$mobile||$("body").removeClass("show-treat")}),$(".about").hover(function(){bark2.volume(.2),bark2.stop(),bark2.play()},function(){bark2.volume(0),bark2.stop()}),$(".about").click(function(){$("body").addClass("show-about"),b()}),$(".back").click(function(){$("body").removeClass("show-about"),clearTimeout($aboutCycle)}),$(".box a").hover(function(){squeak.volume(.2),squeak.stop(),squeak.play()},function(){squeak.volume(0),squeak.stop()}),$(".box div").hover(function(){$text=$(this).find("span").html(),$("#cta").html($text)},function(){$text=$("#cta").attr("data-default"),$("#cta").html($text)}),$(".treat").on("mousemove",function(){$(".clicked").length<=0&&($("body").addClass("show-treat"),$(".clicked").removeClass("clicked"))}),$(".treat").on("mousedown",function(){$("#dog").hasClass("change")&&($mobile||($("body").removeClass("show-treat"),$("body").removeClass("give-treat")),$(this).addClass("clicked"),clearTimeout($eat),clearTimeout($clickTimeout),sniff.fade(.5,0,200),pant.fade(0,.05,200),$this=$(this),$.ajax({url:"treat.php",success:function(a){$("#count").fitText(1),$("#count h2").html(commaSeparateNumber(a)),$("body").addClass("show-count")}}),$eat=setTimeout(function(){sniff.volume(0),pant.volume(0),chomp.volume(1),setTimeout(function(){chomp.volume(0)},500),$("#dog").removeClass("change"),$clickTimeout=setTimeout(function(){$this.removeClass("clicked")},1500),$countTimeout=setTimeout(function(){$("body").removeClass("show-count")},1500)},550))})}function b(){$aboutCycle=setTimeout(function(){$i==$r&&($i=0),$i++,$("#profile figure.shown").removeClass("shown"),$("#profile figure:nth-of-type("+$i+") video").get(0).currentTime=0,$("#profile figure:nth-of-type("+$i+")").addClass("shown"),b()},2e3)}function c(a){o={x:a.clientX,y:a.clientY}}function d(){for(var a=0;a<h.length;a++){var b={mouse:o,part:h[a]};$("#dog img:nth-of-type("+a+")").css({transform:"translateX(-55%) translateY(-60%) matrix(1, 0, 0, 1, "+h[a].x+", "+h[a].y+")","z-index":100-h[a].z}),setTimeout(f,h[a].z*n,b)}}function e(a){var b=a.changedTouches,c=b[0],d="";switch(a.type){case"touchstart":d="mousedown";break;case"touchmove":d="mousemove";break;case"touchend":d="mouseup";break;default:return}var e=document.createEvent("MouseEvent");e.initMouseEvent(d,!0,!0,window,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,0,null),c.target.dispatchEvent(e)}function f(a){a.part.x=g(a.mouse.x-a.part.x)/l+a.part.x,a.part.y=g(a.mouse.y-a.part.y)/l+a.part.y}function g(a){return a>0&&a>m?m:a<0&&a<-m?-m:a}var h,i=(document.getElementById("dog"),window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth),j=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,k=60,l=2,m=200,n=2,o={x:i/2,y:j/2};return h=[{x:o.x,y:o.y,z:44},{x:o.x,y:o.y,z:43},{x:o.x,y:o.y,z:42},{x:o.x,y:o.y,z:41},{x:o.x,y:o.y,z:40},{x:o.x,y:o.y,z:39},{x:o.x,y:o.y,z:38},{x:o.x,y:o.y,z:37},{x:o.x,y:o.y,z:36},{x:o.x,y:o.y,z:35},{x:o.x,y:o.y,z:34},{x:o.x,y:o.y,z:33},{x:o.x,y:o.y,z:32},{x:o.x,y:o.y,z:31},{x:o.x,y:o.y,z:30},{x:o.x,y:o.y,z:29},{x:o.x,y:o.y,z:28},{x:o.x,y:o.y,z:27},{x:o.x,y:o.y,z:26},{x:o.x,y:o.y,z:25},{x:o.x,y:o.y,z:24},{x:o.x,y:o.y,z:23},{x:o.x,y:o.y,z:22},{x:o.x,y:o.y,z:21},{x:o.x,y:o.y,z:20},{x:o.x,y:o.y,z:19},{x:o.x,y:o.y,z:18},{x:o.x,y:o.y,z:17},{x:o.x,y:o.y,z:16},{x:o.x,y:o.y,z:15},{x:o.x,y:o.y,z:14},{x:o.x,y:o.y,z:13},{x:o.x,y:o.y,z:12},{x:o.x,y:o.y,z:11},{x:o.x,y:o.y,z:10},{x:o.x,y:o.y,z:9},{x:o.x,y:o.y,z:8},{x:o.x,y:o.y,z:7},{x:o.x,y:o.y,z:6},{x:o.x,y:o.y,z:5},{x:o.x,y:o.y,z:4},{x:o.x,y:o.y,z:3},{x:o.x,y:o.y,z:2},{x:o.x,y:o.y,z:1},{x:o.x,y:o.y,z:0}],$(window).resize(function(){$(".hide-mobile").is(":visible")?($("body").removeClass("show-treat"),$("body").removeClass("give-treat"),$mobile=!1):($mobile=!0,$("body").addClass("show-treat"),$("body").addClass("give-treat"))}),$r=3,$i=0,document.addEventListener("touchmove",e,!0),document.addEventListener("touchend",e,!0),document.addEventListener("touchstart",e,!0),$(document).on("mousemove ",function(){clearTimeout(timeout),$(".clicked").length<=0&&$("body").hasClass("hide-intro")&&!$("body").hasClass("show-about")&&($("body").hasClass("show-treat")?$("body").hasClass("show-about")||(sniff.volume(.5),pant.volume(0),$("#dog").removeClass("change"),$mobile||$("body").removeClass("give-treat"),timeout=setTimeout(function(){$("body").addClass("show-treat"),sniff.fade(.5,0,200),pant.fade(0,.05,200),$("#dog").addClass("change"),$("body").addClass("give-treat"),$(".clicked").removeClass("clicked")},200)):(sniff.volume(.5),pant.volume(0),$("body").removeClass("give-treat"),$("#dog").removeClass("change"),timeout=setTimeout(function(){$(".clicked").removeClass("clicked"),sniff.fade(.5,0,200)},200)))}),{init:a}}();dog.init(),$(window).blur(function(){sniff.volume(0),pant.volume(0),$mobile||$("body").removeClass("show-treat")}),$(window).load(function(){$("body").addClass("loaded"),setTimeout(function(){$("#intro span:nth-of-type(1)").addClass("show"),bark4.play(),setTimeout(function(){$("#intro span:nth-of-type(1)").removeClass("show"),$("#intro span:nth-of-type(2)").addClass("show"),bark2.play(),setTimeout(function(){$("#intro span:nth-of-type(2)").removeClass("show"),$("#intro span:nth-of-type(3)").addClass("show"),bark3.play(),setTimeout(function(){$("#intro span:nth-of-type(3)").removeClass("show"),$("#intro span:nth-of-type(4)").addClass("show"),bark4.play(),setTimeout(function(){$("#intro span:nth-of-type(4)").removeClass("show"),$("#intro span:nth-of-type(5)").addClass("show"),bark5.play(),setTimeout(function(){$("body").addClass("hide-intro")},300)},300)},300)},300)},300)},600)});