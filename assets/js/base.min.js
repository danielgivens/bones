function commaSeparateNumber(a){for(;/(\d+)(\d{3})/.test(a.toString());)a=a.toString().replace(/(\d+)(\d{3})/,"$1,$2");return a}var timeout,$eat,$clickTimeout,$countTimeout,bark4=new Howl({src:["assets/sounds/bark-1.m4a"],autoplay:!1,volume:.1,loop:!1}),bark2=new Howl({src:["assets/sounds/bark-2.m4a"],autoplay:!1,volume:.1,loop:!1}),bark1=new Howl({src:["assets/sounds/bark-3.m4a"],autoplay:!1,volume:.1,loop:!1}),bark3=new Howl({src:["assets/sounds/bark-5.m4a"],autoplay:!1,volume:.1,loop:!1,rate:.88}),bark5=new Howl({src:["assets/sounds/bark-4.m4a"],autoplay:!1,volume:.1,loop:!1,rate:.9}),squeak=new Howl({src:["assets/sounds/squeak.m4a"],autoplay:!1,volume:.2,loop:!1,rate:1}),sniff=new Howl({src:["assets/sounds/sniff.m4a"],autoplay:!0,volume:0,loop:!0}),pant=new Howl({src:["assets/sounds/pant.m4a"],autoplay:!0,volume:0,loop:!0}),chomp=new Howl({src:["assets/sounds/chomp.m4a"],autoplay:!0,volume:0,loop:!0}),dog=function(){function a(){document.addEventListener("mousemove",b),setInterval(c,1e3/i),$(".treat").hover(function(){$("body").addClass("show-treat")},function(){$("body").removeClass("show-treat")}),$(".box a").hover(function(){squeak.volume(.2),squeak.stop(),squeak.play()},function(){squeak.volume(0),squeak.stop()}),$(".box div").hover(function(){$text=$(this).find("span").html(),$("#cta").html($text)},function(){$text=$("#cta").attr("data-default"),$("#cta").html($text)}),$(".treat").on("mousemove",function(){$(".clicked").length<=0&&($("body").addClass("show-treat"),$(".clicked").removeClass("clicked"))}),$(".treat").click(function(){$("#dog").hasClass("change")&&($("body").removeClass("show-treat"),$("body").removeClass("give-treat"),$(this).addClass("clicked"),clearTimeout($eat),clearTimeout($clickTimeout),sniff.fade(.5,0,200),pant.fade(0,.05,200),$this=$(this),$.ajax({url:"treat.php",success:function(a){$("#count").fitText(1),$("#count h2").html(commaSeparateNumber(a)),$("body").addClass("show-count")}}),$eat=setTimeout(function(){sniff.volume(0),pant.volume(0),chomp.volume(1),setTimeout(function(){chomp.volume(0)},500),$("#dog").removeClass("change"),$clickTimeout=setTimeout(function(){$this.removeClass("clicked")},1500),$countTimeout=setTimeout(function(){$("body").removeClass("show-count")},1500)},550))})}function b(a){m={x:a.clientX,y:a.clientY}}function c(){for(var a=0;a<f.length;a++){var b={mouse:m,part:f[a]};$("#dog img:nth-of-type("+a+")").css({transform:"translateX(-55%) translateY(-60%) matrix(1, 0, 0, 1, "+f[a].x+", "+f[a].y+")","z-index":100-f[a].z}),setTimeout(d,f[a].z*l,b)}}function d(a){a.part.x=e(a.mouse.x-a.part.x)/j+a.part.x,a.part.y=e(a.mouse.y-a.part.y)/j+a.part.y}function e(a){return a>0&&a>k?k:a<0&&a<-k?-k:a}var f,g=(document.getElementById("dog"),window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth),h=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,i=60,j=2,k=200,l=2,m={x:g/2,y:h/2};return f=[{x:m.x,y:m.y,z:44},{x:m.x,y:m.y,z:43},{x:m.x,y:m.y,z:42},{x:m.x,y:m.y,z:41},{x:m.x,y:m.y,z:40},{x:m.x,y:m.y,z:39},{x:m.x,y:m.y,z:38},{x:m.x,y:m.y,z:37},{x:m.x,y:m.y,z:36},{x:m.x,y:m.y,z:35},{x:m.x,y:m.y,z:34},{x:m.x,y:m.y,z:33},{x:m.x,y:m.y,z:32},{x:m.x,y:m.y,z:31},{x:m.x,y:m.y,z:30},{x:m.x,y:m.y,z:29},{x:m.x,y:m.y,z:28},{x:m.x,y:m.y,z:27},{x:m.x,y:m.y,z:26},{x:m.x,y:m.y,z:25},{x:m.x,y:m.y,z:24},{x:m.x,y:m.y,z:23},{x:m.x,y:m.y,z:22},{x:m.x,y:m.y,z:21},{x:m.x,y:m.y,z:20},{x:m.x,y:m.y,z:19},{x:m.x,y:m.y,z:18},{x:m.x,y:m.y,z:17},{x:m.x,y:m.y,z:16},{x:m.x,y:m.y,z:15},{x:m.x,y:m.y,z:14},{x:m.x,y:m.y,z:13},{x:m.x,y:m.y,z:12},{x:m.x,y:m.y,z:11},{x:m.x,y:m.y,z:10},{x:m.x,y:m.y,z:9},{x:m.x,y:m.y,z:8},{x:m.x,y:m.y,z:7},{x:m.x,y:m.y,z:6},{x:m.x,y:m.y,z:5},{x:m.x,y:m.y,z:4},{x:m.x,y:m.y,z:3},{x:m.x,y:m.y,z:2},{x:m.x,y:m.y,z:1},{x:m.x,y:m.y,z:0}],$(document).on("mousemove",function(){clearTimeout(timeout),$(".clicked").length<=0&&$("body").hasClass("hide-intro")&&($("body").hasClass("show-treat")?(sniff.volume(.5),pant.volume(0),$("#dog").removeClass("change"),$("body").removeClass("give-treat"),timeout=setTimeout(function(){$("body").addClass("show-treat"),sniff.fade(.5,0,200),pant.fade(0,.05,200),$("#dog").addClass("change"),$("body").addClass("give-treat"),$(".clicked").removeClass("clicked")},200)):(sniff.volume(.5),pant.volume(0),$("body").removeClass("give-treat"),$("#dog").removeClass("change"),timeout=setTimeout(function(){$(".clicked").removeClass("clicked"),sniff.fade(.5,0,200)},200)))}),{init:a}}();dog.init(),$(window).blur(function(){sniff.volume(0),pant.volume(0),$("body").removeClass("show-treat")}),$(window).load(function(){$("#intro span:nth-of-type(1)").addClass("show"),bark1.play(),setTimeout(function(){$("#intro span:nth-of-type(1)").removeClass("show"),$("#intro span:nth-of-type(2)").addClass("show"),bark2.play(),setTimeout(function(){$("#intro span:nth-of-type(2)").removeClass("show"),$("#intro span:nth-of-type(3)").addClass("show"),bark3.play(),setTimeout(function(){$("#intro span:nth-of-type(3)").removeClass("show"),$("#intro span:nth-of-type(4)").addClass("show"),bark4.play(),setTimeout(function(){$("#intro span:nth-of-type(4)").removeClass("show"),$("#intro span:nth-of-type(5)").addClass("show"),bark5.play(),setTimeout(function(){$("body").addClass("hide-intro")},300)},300)},300)},300)},300)});